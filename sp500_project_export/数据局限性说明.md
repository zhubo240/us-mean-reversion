# 数据局限性说明：行业贡献误差与公司级别数据缺失

## 问题背景

在查看最终报告的"完整年度数据表"时，发现**行业贡献合计**与**名义回报率**之间存在误差（Error列），部分年份误差达到 1-3 个百分点。

---

## 一、误差是什么？

误差是**绝对百分点差值**，不是相对比例。

以 2020 年为例：
- S&P 500 名义回报 = 18.02%
- 五大行业贡献加总 = 21.17%
- **Error = +3.15 个百分点**

即：行业贡献合计比指数实际回报多了 3.15%，是直接的百分点偏差。

---

## 二、误差的根本原因

### 当前计算方式

```
行业贡献 = S&P 500 行业权重 × Kenneth French 全市场行业回报率
```

- **行业权重**：来自 S&P 500 的行业占比（相对准确）
- **行业回报率**：来自 Kenneth French 数据库的全市场行业回报率

问题在于：French 的行业回报率覆盖的是**全美股市场**（几千家上市公司），而不是仅 S&P 500 的 500 家成分股。全市场包含大量中小盘股，它们的行业表现和 S&P 500 内的大盘股不完全一致。

### 理想计算方式

```
行业贡献 = Σ (指数内每家公司的市值权重 × 该公司回报率)，按行业分组
```

这样做的话，行业贡献加总**精确等于**指数总回报，误差为零。

### 为什么做不到理想方式？

因为**没有公司级别的历史数据**。要实现理想计算，需要知道：
- 每年 S&P 500 里具体有哪些公司
- 每家公司当年的回报率
- 每家公司在指数中的市值权重

这些数据在公开渠道无法完整获取。

---

## 三、公司级别数据为什么难以获取？

### 1. 退市公司数据消失
公司一旦退市（被收购、破产、私有化），Yahoo Finance 等免费平台会删除其历史数据。S&P 500 近百年来有 1194 家公司曾经进出，大量已不存在。

### 2. 幸存者偏差
只能看到现存公司的数据，看不到安然（Enron）、雷曼兄弟（Lehman Brothers）等暴雷归零公司的记录，会高估整体回报率。

### 3. 公司身份变化复杂
改名、合并、拆分、ticker 变更频繁。例如 Google → Alphabet，Standard Oil 拆分为多家公司。免费数据源难以串联追踪。

### 4. 成分股变动记录不公开
S&P Global（指数运营方）不免费公开完整的历史成分股变动清单。无法确切知道某年哪家公司被加入或移除。

### 5. 早期分红和拆股数据缺失
1920-1960 年代的精确分红数据和拆股调整系数，免费渠道基本找不到。

---

## 四、能获取公司级别数据的渠道

### 付费数据库（完整覆盖）
- **CRSP**（Center for Research in Security Prices）— 芝加哥大学，学术界金标准，覆盖 1925 年至今，保留退市公司数据，年费数万美元
- **Compustat（S&P Capital IQ）** — 侧重财务报表，也有股价数据，同样昂贵
- **Bloomberg Terminal** — 约 2 万美元/年，历史深度不如 CRSP

### 免费/低成本（有限覆盖）
- **Kenneth French 数据库** — 免费，有行业/因子层面数据，但不是个股级别
- **Shiller 数据集** — 免费，仅指数级别月度数据
- **SEC EDGAR** — 免费，有原始财报，但只到约 1993 年，需自行解析

### 学术渠道
- 通过大学 **WRDS 平台**可访问 CRSP + Compustat，部分大学校友仍可使用

---

## 五、对本项目的影响

### 不影响核心结论
指数层面的均值回归分析（CAGR 6.70% ≈ 理论 6.8%）使用的是 S&P 500 官方年度回报数据，**完全准确，不受此问题影响**。

### 影响行业贡献分析的精度
报告中 Part II（行业层面）的行业贡献分解存在上述口径误差，大部分年份在 1-2 个百分点以内，个别年份（如 2020 年）可达约 3 个百分点。

### 如果要消除误差
需要获取 CRSP 或同等级别的公司数据库，才能实现从公司到行业到指数的精确自下而上计算。

---

## 六、总结

| 维度 | 数据来源 | 精度 |
|------|---------|------|
| 指数年度回报 | S&P 500 官方数据 | 精确 |
| 行业权重 | S&P 500 行业分布 | 较准确 |
| 行业回报率 | Kenneth French 全市场 | 近似（口径不同） |
| 公司级别数据 | 缺失 | 无法获取（需付费数据库） |

误差的本质：**用全市场的行业回报率近似 S&P 500 内部的行业回报率**，两者口径不同导致偏差。这是数据可得性的限制，不是计算错误。

---

*文档创建时间：2026-02-10*
*基于项目讨论整理*
